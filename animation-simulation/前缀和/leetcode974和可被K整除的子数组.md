> å¦‚æœé˜…è?»æ—¶ï¼Œå‘ç°é”™è¯?ï¼Œæˆ–è€…åŠ¨ç”»ä¸å?ä»¥æ˜¾ç¤ºçš„é—?é¢˜å¯ä»¥æ·»åŠ æˆ‘å¾?ä¿¡å¥½å? **[tan45du_one](https://raw.githubusercontent.com/tan45du/tan45du.github.io/master/ä¸?äººå¾®ä¿?.15egrcgqd94w.jpg)** ï¼Œå?‡æ³¨ github + é¢˜ç›® + é—?é¢? å‘æˆ‘åé??
>
> æ„Ÿè°¢æ”?æŒï¼Œè¯¥ä»“åº“ä¼šä¸€ç›´ç»´æŠ¤ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰ä¸€ä¸?ä¸¢å¸®åŠ©ã€?
>
> å¦å?–å¸Œæœ›æ‰‹æœºé˜…è¯»çš„åŒå?¦å¯ä»¥æ¥æˆ‘çš„ <u>[**å…?ä¼—å·ï¼šè?å¨çš„ç®—æ³•å°å±?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u> ä¸¤ä¸ªå¹³å°åŒæ?¥ï¼Œæƒ³è?å’Œé¢˜å‹ä¸€èµ·åˆ·é¢˜ï¼Œäº’ç›¸ç›‘ç£çš„åŒå­¦ï¼Œå?ä»¥åœ¨æˆ‘çš„å°å±‹ç‚¹å‡»<u>[**åˆ·é?˜å°é˜?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u>è¿›å…¥ã€?

#### [974. å’Œå¯è¢? K æ•´é™¤çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/)

**é¢˜ç›®æè¿°**

> ç»™å®šä¸€ä¸?æ•´æ•°æ•°ç»„ Aï¼Œè¿”å›å…¶ä¸?å…ƒç´ ä¹‹å’Œå?è¢? K æ•´é™¤çš„ï¼ˆè¿ç»­ã€éç©ºï¼‰å­æ•°ç»„çš„æ•°ç›®ã€?

**ç¤ºä¾‹ï¼?**

> è¾“å…¥ï¼šA = [4,5,0,-2,-3,1], K = 5
> è¾“å‡ºï¼?7

**è§£é‡Šï¼?**

> æœ? 7 ä¸?å­æ•°ç»„æ»¡è¶³å…¶å…ƒç´ ä¹‹å’Œå?è¢? K = 5 æ•´é™¤ï¼?
> [4, 5, 0, -2, -3, 1], [5], [5, 0], [5, 0, -2, -3], [0], [0, -2, -3], [-2, -3]

**å‰ç¼€å’?+HashMap**

**è§£æ**

æˆ‘ä»¬åœ¨è?¥æ–‡çš„ç??ä¸€é¢? **å’Œä¸º K çš„å­æ•°ç»„ **ä¸?ï¼Œæˆ‘ä»?éœ€è¦æ±‚å‡ºæ»¡è¶³æ¡ä»¶çš„åŒºé—´ï¼Œè?ä¸‹å›?

![å¾?ä¿¡æˆªå›¾_20210115194113](https://cdn.jsdelivr.net/gh/tan45du/github.io.phonto2@master/myphoto/å¾?ä¿¡æˆªå›¾_20210115194113.5e56re9qdic0.png)

æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ»¡è¶³ï¼Œå’Œä¸º K çš„åŒºé—´ã€‚æˆ‘ä»?æ­¤æ—¶ presum æ˜?å·²çŸ¥çš„ï¼Œk ä¹Ÿæ˜¯å·²çŸ¥çš„ï¼Œæˆ‘ä»¬å?éœ€è¦æ‰¾åˆ? presum - k åŒºé—´çš„ä¸ªæ•°ï¼Œå°±èƒ½å¾—åˆ° k çš„åŒºé—´ä¸ªæ•°ã€‚ä½†æ˜?æˆ‘ä»¬åœ¨å½“å‰é?˜ç›®ä¸?åº”è?¥æ€ä¹ˆåšå‘¢ï¼Ÿè?ä¸‹å›¾ã€?

![å¾?ä¿¡æˆªå›¾_20210115150520](https://cdn.jsdelivr.net/gh/tan45du/github.io.phonto2@master/myphoto/å¾?ä¿¡æˆªå›¾_20210115150520.3kh5yiwwmlm0.png)

æˆ‘ä»¬åœ¨ä¹‹å‰çš„ä¾‹å­ä¸?è¯´åˆ°ï¼Œpresum[j+1] - presum[i] å?ä»¥å¾—åˆ? nums[i] + nums[i+1]+.... nums[j]ï¼Œä¹Ÿå°±æ˜¯[i,j]åŒºé—´çš„å’Œã€?

é‚£ä¹ˆæˆ‘ä»¬æƒ³è?åˆ¤æ–?åŒºé—´ [i,j] çš„å’Œæ˜?å¦èƒ½æ•´é™¤ Kï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸?ç´?è‰²é‚£ä¸€æ®µæ˜¯å¦èƒ½æ•´é™¤ Kï¼Œé‚£ä¹ˆæˆ‘ä»?å?éœ€åˆ¤æ–­

(presum[j+1] - presum[i] ) % k æ˜?å¦ç­‰äº? 0 å³å¯ï¼?

æˆ‘ä»¬å‡è?? (presum[j+1] - presum[i] ) % k == 0ï¼›åˆ™

presum[j+1] % k - presum[i] % k == 0;

presum[j +1] % k = presum[i] % k ;

æˆ‘ä»¬ presum[j +1] % k çš„å€? key æ˜?å·²çŸ¥çš„ï¼Œåˆ™æ˜¯å½“å‰çš? presum å’? k çš„å…³ç³»ï¼Œæˆ‘ä»¬å?éœ€è¦çŸ¥é“ä¹‹å‰çš„å‰ç¼€åŒºé—´é‡Œå«æœ‰ç›¸åŒä½™æ•? ï¼ˆkeyï¼‰çš„ä¸?æ•°ã€‚åˆ™èƒ½å?ŸçŸ¥é“å½“å‰èƒ½å¤Ÿæ•´é™? K çš„åŒºé—´ä¸ªæ•°ã€‚è?ä¸‹å›?

![å¾?ä¿¡æˆªå›¾_20210115152113](https://cdn.jsdelivr.net/gh/tan45du/github.io.phonto2@master/myphoto/å¾?ä¿¡æˆªå›¾_20210115152113.606bcpexpww0.png)

**é¢˜ç›®ä»£ç **

```java
class Solution {
    public int subarraysDivByK(int[] A, int K) {
        HashMap<Integer,Integer> map = new HashMap<>();
        map.put(0,1);
        int presum = 0;
        int count = 0;
        for (int x : A) {
             presum += x;
             //å½“å‰ presum ä¸? Kçš„å…³ç³»ï¼Œä½™æ•°æ˜?å‡ ï¼Œå½“è??é™¤æ•°ä¸ºè´Ÿæ•°æ—¶å–æ¨¡ç»“æœä¸ºè´Ÿæ•°ï¼Œéœ€è¦çº æ­?
             int key = (presum % K + K) % K;
             //æŸ¥è?¢å“ˆå¸Œè¡¨è·å–ä¹‹å‰keyä¹Ÿå°±æ˜?ä½™æ•°çš„æ?¡æ•°
             if (map.containsKey(key)) {
                 count += map.get(key);
             }
             //å­˜å…¥å“ˆå¸Œè¡¨å½“å‰keyï¼Œä¹Ÿå°±æ˜¯ä½™æ•°
             map.put(key,map.getOrDefault(key,0)+1);
        }
        return count;
    }
}
```

æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢ä»£ç ä¸?æœ‰ä¸€æ®µä»£ç æ˜¯è¿™æ ·çš?

```java
int key = (presum % K + K) % K;
```

è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸èƒ½ç›´æ¥ç”¨ presum % k å—ï¼Ÿ

è¿™æ˜¯å› ä¸ºå½“æˆ‘ä»? presum ä¸ºè´Ÿæ•°æ—¶ï¼Œéœ€è¦å?¹å…¶çº æ?£ã€‚çº æ­£å‰(-1) %2 = (-1)ï¼Œçº æ­£ä¹‹å? ( (-1) % 2 + 2) % 2=1 ä¿å­˜åœ¨å“ˆå¸Œè¡¨ä¸?çš„åˆ™ä¸? 1.åˆ™ä¸ä¼šæ¼æ‰éƒ¨åˆ†æƒ…å†µï¼Œä¾‹å?‚è¾“å…¥ä¸º [-1,2,9],K = 2 å¦‚æœä¸å?¹å…¶çº æ?£åˆ™ä¼šæ¼æ‰åŒºé—? [2] æ­¤æ—¶ 2 % 2 = 0ï¼Œç?¦åˆæ¡ä»¶ï¼Œä½†æ˜?ä¸ä¼šè¢?è®¡æ•°ã€?

é‚£ä¹ˆè¿™ä¸ªé¢˜ç›®æˆ‘ä»¬å?ä¸å¯ä»¥ç”¨æ•°ç»„ï¼Œä»£æ›? map å‘?ï¼Ÿå½“ç„¶ä¹Ÿæ˜?å?ä»¥çš„ï¼Œå› ä¸ºæ?¤æ—¶æˆ‘ä»¬çš„å“ˆå¸Œè¡¨å­˜çš„æ˜?ä½™æ•°ï¼Œä½™æ•°æœ€å¤§ä¹Ÿå?ä¸è¿‡æ˜? K-1 æ‰€ä»¥æˆ‘ä»?å?ä»¥ç”¨å›ºå®šé•¿åº¦ K çš„æ•°ç»„æ¥æ¨¡æ‹Ÿå“ˆå¸Œè¡¨ã€?

Java Code:

```java
class Solution {
    public int subarraysDivByK(int[] A, int K) {
        int[] map = new int[K];
        map[0] = 1;
        int len = A.length;
        int presum = 0;
        int count = 0;
        for (int i = 0; i < len; ++i) {
            presum += A[i];
            //æ±‚key
            int key = (presum % K + K) % K;
            //countæ·»åŠ æ¬¡æ•°ï¼Œå¹¶å°†å½“å‰çš„map[key]++;
            count += map[key]++;
        }
        return count;
    }
}
```

C++ Code:

```cpp
class Solution {
public:
    int subarraysDivByK(vector<int>& A, int K) {
        vector <int> map (K, 0);
      	int len = A.size();
        int count = 0;
        int presum = 0;
        map[0] = 1;
         for (int i = 0; i < len; ++i) {
            presum += A[i];
            //æ±‚key
            int key = (presum % K + K) % K;
            //countæ·»åŠ æ¬¡æ•°ï¼Œå¹¶å°†å½“å‰çš„map[key]++;
            count += (map[key]++);
        }
        return count;
    }
};
```

Go Code:

```go
func subarraysDivByK(nums []int, k int) int {
    m := make(map[int]int)
    cnt := 0
    sum := 0
    m[0] = 1
    for _, num := range nums {
        sum += num
        key := (sum % k + k) % k
        cnt += m[key]
        m[key]++
    }
    return cnt
}
```

