> å¦‚æœé˜…è?»æ—¶ï¼Œå‘ç°é”™è¯?ï¼Œæˆ–è€…åŠ¨ç”»ä¸å?ä»¥æ˜¾ç¤ºçš„é—?é¢˜å¯ä»¥æ·»åŠ æˆ‘å¾?ä¿¡å¥½å? **[tan45du_one](https://raw.githubusercontent.com/tan45du/tan45du.github.io/master/ä¸?äººå¾®ä¿?.15egrcgqd94w.jpg)** ï¼Œå?‡æ³¨ github + é¢˜ç›® + é—?é¢? å‘æˆ‘åé??
>
> æ„Ÿè°¢æ”?æŒï¼Œè¯¥ä»“åº“ä¼šä¸€ç›´ç»´æŠ¤ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰ä¸€ä¸?ä¸¢å¸®åŠ©ã€?
>
> å¦å?–å¸Œæœ›æ‰‹æœºé˜…è¯»çš„åŒå?¦å¯ä»¥æ¥æˆ‘çš„ <u>[**å…?ä¼—å·ï¼šè?å¨çš„ç®—æ³•å°å±?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u> ä¸¤ä¸ªå¹³å°åŒæ?¥ï¼Œæƒ³è?å’Œé¢˜å‹ä¸€èµ·åˆ·é¢˜ï¼Œäº’ç›¸ç›‘ç£çš„åŒå­¦ï¼Œå?ä»¥åœ¨æˆ‘çš„å°å±‹ç‚¹å‡»<u>[**åˆ·é?˜å°é˜?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u>è¿›å…¥ã€?

#### [137. å?å‡ºç°ä¸€æ¬¡çš„æ•°å­— II](https://leetcode-cn.com/problems/single-number-ii/)

> ç»™å®šä¸€ä¸?éç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸?å…ƒç´ å?å‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°äº†ä¸‰æ?¡ã€‚æ‰¾å‡ºé‚£ä¸?å?å‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€?

ç¤ºä¾‹ 1:

> è¾“å…¥: [2,2,3,2]
> è¾“å‡º: 3

ç¤ºä¾‹ 2:

> è¾“å…¥: [0,1,0,1,0,1,99]
> è¾“å‡º: 99

é¢˜ç›®å¾ˆå?¹æ˜“ç†è§£ï¼Œåˆšæ‰çš„é¢˜ç›®æ˜?å…¶ä»–å…ƒç´ å‡ºç°ä¸¤æ?¡ï¼Œç›?æ ‡å…ƒç´ å‡ºç°ä¸€æ¬¡ï¼Œè¯¥é?˜æ˜¯å…¶ä»–å…ƒç´ å‡ºç°ä¸‰æ?¡ï¼Œç›?æ ‡å…ƒç´ å‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»?å®Œå…¨å?ä»¥å€ŸåŠ©ä¸Šé?˜çš„ä¸€äº›åšæ³•è§£å†³è?¥é?˜ã€?

### æ±‚å’Œæ³?

#### è§£æ

æˆ‘ä»¬åœ¨ä¸Šé¢˜ä¸­ä»‹ç»äº†æ±‚å’Œæ³•çš„è§£é¢˜æ?¥é?¤ï¼Œç°åœ¨è¯¥é?˜ä¸­å…¶ä»–å…ƒç´ éƒ½å‡ºç°ä¸‰æ¬¡ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å…ƒç´ å‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»?åˆ©ç”¨æ±‚å’Œæ³•ä¹Ÿæ˜?å®Œå…¨ OK çš„ã€‚ä¸‹é¢æˆ‘ä»?æ¥çœ‹å…·ä½“æ­¥é?¤å§ã€?

1.é€šè¿‡éå†æ•°ç»„è·å–æ‰€æœ‰å…ƒç´ çš„å’Œä»¥å? HashSet å†…å…ƒç´ çš„å’Œã€?

2.ï¼ˆSumSet \* 3 - SumNumï¼?/ 2 å³å¯ï¼Œé™¤ä»? 2 æ˜?å› ä¸ºæˆ‘ä»¬å‡å»ä¹‹åå¾—åˆ°çš„æ˜¯ 2 å€çš„ç›?æ ‡å…ƒç´ ã€?

æ³?ï¼šè¿™ä¸?é¢˜ç›®ä¸?éœ€è¦æ³¨æ„æº¢å‡ºçš„æƒ…å†µ ã€?

#### é¢˜ç›®ä»£ç 

Java Code:

```java
class Solution {
    public int singleNumber(int[] nums) {
        HashSet<Integer> set = new HashSet<>();
        long setsum = 0;
        long numsum = 0;
        for (int x : nums) {
            //æ‰€æœ‰å…ƒç´ çš„å’?
            numsum += x;
            if (!set.contains(x)) {
                //HashSetå…ƒç´ å’?
            	setsum += x;
            }
            set.add(x);
        }
        //è¿”å›å?å‡ºç°ä¸€æ¬¡çš„æ•?
        return (int)((3 * setsum - numsum) / 2);
    }
}
```

C++ Code:

```cpp
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        unordered_set<int> set;
        long setsum = 0;
        long numsum = 0;
        for (int x : nums) {
           //æ‰€æœ‰å…ƒç´ çš„å’?
           numsum += x;
           if (set.find(x) == set.end()) {
               //HashSetå†…å…ƒç´ çš„å’?
               setsum += x;
           }
           set.insert(x);
        }
        //è¿”å›å€?
        return (3 * setsum - numsum) / 2;
    }
};
```

JS Code:

```javascript
var singleNumber = function (nums) {
  let set = new Set();
  let setsum = 0;
  let numsum = 0;
  for (let x of nums) {
    //æ‰€æœ‰å…ƒç´ çš„å’?
    numsum += x;
    if (!set.has(x)) {
      setsum += x;
    }
    //HashSetå†…å…ƒç´ çš„å’?
    set.add(x);
  }
  //è¿”å›å€?
  return (3 * setsum - numsum) / 2;
};
```

Python Code:

```python
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        return (3 * sum(set(nums)) - sum(nums)) // 2
```

è¿™ä¸ªé¢˜ç›®ç”? HashMap å’Œæ’åºæŸ¥æ‰¾è‚¯å®šä¹Ÿæ˜?å?ä»¥çš„ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å†™ä¸€ä¸‹ï¼Œå¦å?–æˆ‘ä»?åœ¨ç??ä¸€é¢˜ä¸­æœ‰ä¸ªåˆ©ç”¨å¼‚æˆ–æ±‚è§£çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªé¢˜ç›®æ˜?å‡ºç°ä¸‰æ?¡ï¼Œæˆ‘ä»¬åˆ™ä¸èƒ½åˆ©ç”¨ç›´æ¥å¼‚æˆ–æ¥æ±‚è§£ï¼Œé‚£è¿˜æœ‰å…¶ä»–æ–¹æ³•å—ï¼Ÿ

### ä½è¿ç®?

#### è§£æ

è¿™ä¸ªæ–¹æ³•ä¸»è?åšæ³•æ˜¯å°†æˆ‘ä»?çš„æ•°çš„äºŒè¿›åˆ¶ä½æ¯ä¸€ä½ç›¸åŠ ï¼Œç„¶åå¯¹å…¶æ¯ä¸€ä½çš„å’Œä¸ 3 å–ä½™ ï¼Œæˆ‘ä»?çœ‹ä¸‹é¢çš„ä¾‹å­ã€?

![å?å‡ºç°ä¸€æ¬¡çš„æ•°å­—2](https://cdn.jsdelivr.net/gh/tan45du/tan45du.github.io.photo@master/photo/å?å‡ºç°ä¸€æ¬¡çš„æ•°å­—2.5p4wxbiegxc0.png)

é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè?è¿™æ ·åšå‘?ï¼Ÿå¤§å®¶æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå…¶ä»–æ•°éƒ½å‡ºç° 3 æ¬¡ï¼Œå?æœ‰ç›®æ ‡æ•°å‡ºç° 1 æ¬¡ï¼Œé‚£ä¹ˆæ¯ä¸€ä½çš„ 1 çš„ä¸ªæ•°æ— éæœ‰è¿™ä¸¤ç§æƒ…å†µï¼Œä¸? 3 çš„å€æ•°ï¼ˆå…¨ä¸ºå‡ºç°ä¸‰æ¬¡çš„æ•°ï¼‰æˆ? 3 çš„å€æ•° +1ï¼ˆåŒ…å?å‡ºç°ä¸€æ¬¡çš„æ•°ï¼‰ã€‚è¿™ä¸? 3 çš„å€æ•° +1 çš„æƒ…å†µä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ•°çš„é‚£ä¸€ä½ã€?

#### é¢˜ç›®ä»£ç 

Java Code:

```java
class Solution {
    public int singleNumber(int[] nums) {
      int res = 0;
      for(int i = 0; i < 32; i++){
          int count = 0;
          for (int num: nums) {
              //æ£€æŸ¥ç?? i ä½æ˜¯å¦ä¸º 1
              if ((num >> i & 1) == 1) {
                  count++;
              }
          }
          if (count % 3 != 0) {
              // å°†ç?? i ä½è?¾ä¸º 1
              res = res | 1 << i;
          }
      }
      return res;
    }
}
```

Go Code:

```go
func singleNumber(nums []int) int {
    res := 0
    // Goè¯?è¨€ä¸?ï¼Œintå?32ä½ä»¥ä¸?
    for i := 0; i < 64; i++ {
        cnt := 0
        for j := 0; j < len(nums); j++ {
            if (nums[j] >> i & 1) == 1 {
                cnt++
            }
        }
        if cnt % 3 != 0{
            res = res | 1 << i
        }
    }
    return res
}
```

æˆ‘ä»¬æ¥è§£æä¸€ä¸‹æˆ‘ä»?çš„ä»£ç ?
C++ Code:

```cpp
class Solution {
public:
    int singleNumber(vector<int>& nums) {
      int res = 0;
      for(int i = 0; i < 32; i++){
          int count = 0;
          for (int num: nums) {
              //æ£€æŸ¥ç?? i ä½æ˜¯å¦ä¸º 1
              if ((num >> i & 1) == 1) {
                  count++;
              }
          }
          if (count % 3 != 0) {
              // å°†ç?? i ä½è?¾ä¸º 1
              res = res | 1 << i;
          }
      }
      return res;
    }
};
```

JS Code:

```javascript
var singleNumber = function (nums) {
  let res = 0;
  for (let i = 0; i < 32; i++) {
    let count = 0;
    for (let num of nums) {
      //æ£€æŸ¥ç?? i ä½æ˜¯å¦ä¸º 1
      if (((num >> i) & 1) == 1) {
        count++;
      }
    }
    if (count % 3 != 0) {
      // å°†ç?? i ä½è?¾ä¸º 1
      res = res | (1 << i);
    }
  }
  return res;
};
```

Python Code:

```python
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        res = 0
        for i in range(32):
            count = 0
            for num in nums:
                # æ£€æŸ¥ç?? i ä½æ˜¯å¦ä¸º 1
                if (num >> i & 1) == 1:
                    count += 1
            if count % 3 != 0:
                # å°†ç?? i ä½è?¾ä¸º 1
                res = res | 1 << i
        # è¿™é‡Œçš„åšæ³•ç¨æœ‰ä¸åŒï¼Œè§ä¸‹æ–¹è§£é‡?
        if (res >> 31 & 1) == 1:
            res = ~(res ^ 4294967295)
        return res
```

æˆ‘ä»¬æ¥è§£æä¸€ä¸‹æˆ‘ä»?çš„ä»£ç ï¼š

> **<<** å·¦ç§»è¿ç®—ç¬¦ï¼šè¿ç®—æ•°çš„å„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œç”? **<<** å³è¾¹çš„æ•°å­—æŒ‡å®šäº†ç§»åŠ¨çš„ä½æ•°ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥ 0ã€?
>
> **>>** å³ç§»è¿ç®—ç¬¦ï¼š**>> ** å·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ï¼?**>>** å³è¾¹çš„æ•°å­—æŒ‡å®šäº†ç§»åŠ¨çš„ä½æ•°ã€?

å¦å?–æˆ‘ä»?çš„ä»£ç ä¸­è¿˜åŒ…å?äº? a & 1 å’? a | 1 è¿™æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿç»§ç»?çœ‹ä¸‹å›¾ã€?

> **&** æŒ‰ä½ä¸è¿ç®—ç?¦ï¼šå‚ä¸è¿ç®—çš„ä¸¤ä¸?å€¼ï¼Œå¦‚æœä¸¤ä¸ªç›¸åº”ä½éƒ½ä¸? 1,åˆ™è?¥ä½çš„ç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€?

![å?å‡ºç°ä¸€æ¬¡çš„æ•°ä½è¿ç®—ä¸”](https://cdn.jsdelivr.net/gh/tan45du/tan45du.github.io.photo@master/photo/å?å‡ºç°ä¸€æ¬¡çš„æ•°ä½è¿ç®—ä¸?.vq3lcgv0rbk.png)

å› ä¸ºæˆ‘ä»¬ a & 1 ä¸? 1 å?æœ‰æœ€åä¸€ä½ä¸º 1ï¼Œå…¶ä½™ä½çš†ä¸º 0 ï¼Œæ‰€ä»¥æˆ‘ä»?å‘ç° **a & 1 çš„ä½œç”¨å°±æ˜?åˆ¤æ–­ a çš„æœ€åä¸€ä½æ˜¯å¦ä¸º 1** ï¼Œå?‚æœ a çš„æœ€åä¸€ä½ä¸º 1 ï¼Œa & 1 = 1ï¼Œå¦åˆ™ä¸º 0 ã€‚æ‰€ä»¥æˆ‘ä»?è¿˜å¯ä»¥é€šè¿‡è¿™ä¸ªå…?å¼æ¥åˆ¤æ–­ a çš„å?‡å¶æ€§ã€?

> **|** æŒ‰ä½æˆ–è¿ç®—ç?¦ï¼šå?è¦å?¹åº”çš„äºŒä¸?äºŒè¿›ä½æœ‰ä¸€ä¸?ä¸? 1 æ—¶ï¼Œç»“æœä½å°±ä¸? 1ã€?

![æˆ–è¿ç®—](https://cdn.jsdelivr.net/gh/tan45du/tan45du.github.io.photo@master/photo/æˆ–è¿ç®?.6orep3gsrxc0.png)

è¿™ä¸ªå…?å¼çš„ä½œç”¨å°±æ˜¯**å°†æˆ‘ä»?ç§»ä½åçš„ res çš„æœ€åä¸€ä½? 0 å˜ä¸º 1**ã€‚è¿™ä¸? 1 ä¹Ÿå°±ä»£è¡¨ç€æˆ‘ä»¬å?å‡ºç°ä¸€æ¬¡å…ƒç´ çš„æŸä¸€ä½ã€?

> è´¡çŒ®è€…[@jaredliw](https://github.com/jaredliw)æ³?ï¼?
>
> è¿™é‡Œæˆ‘æƒ³è§£é‡Šä¸€ä¸? python é‡Œçš„è¿™ä¸¤è¡Œï¼š
>
> ```python
> if (res >> 31 & 1) == 1:
>     res = ~(res ^ 4294967295)
> ```
>
> int çš„çš„ç¬¦å·æ˜?ç”±æœ€é«˜ä½ï¼ˆè¿™é¢˜ç”¨çš„æ˜¯ 32 ä½ï¼‰çš„å€¼å†³å®šï¼Œ1 å°±æ˜¯è´Ÿæ•°ï¼?0 å°±æ˜¯æ­£æ•°ã€‚ç”±äº? python çš? int ç±»å‹ç†è?ºä¸Šæ˜?æ— é™å¤§çš„ï¼Œè¿™é¢˜é‡Œçš? res éƒ½ä¼šè¢?è®¤å®šä¸ºæ˜¯æ­£æ•°ã€‚ä¸¾ä¸?ä¾‹å­ï¼?32 ä½çš„ -4 æ˜?è¿™æ ·çš„ï¼š
>
> > 11111111111111111111111111111100 ï¼ˆæœ€é«˜ä½æ˜? 1 ï¼?= -4
>
> python é‡Œçš„åˆ™æ˜¯è¿™æ ·çš„ï¼š
>
> > ...000000000000 11111111111111111111111111111100 ï¼ˆå‰é¢è·Ÿç€æ— é™ä¸? 0ï¼Œæœ€é«˜ä½æ˜? 0 ï¼?= 4294967292
>
> æ€ä¹ˆåŠå‘¢ï¼?
>
> æˆ‘ä»¬å?ä»¥å…ˆå°? res çš„å 32 ä½å–åï¼ˆä¸? 4294967295 å¼‚æˆ–ï¼?4294967295 çš„äºŒè¿›åˆ¶æ˜? 32 ä¸? 1ï¼‰ï¼Œå¾—åˆ°ï¼?
>
> > ...000000000000 00000000000000000000000000000011ï¼ˆæœ€é«˜ä½æ˜? 0ï¼?= 3
>
> ä¹‹åå†ç”¨æ³¢æµªå·æŒ‰ä½å–åï¼Œå¾—åˆ°ï¼?
>
> > ...111111111111 11111111111111111111111111111100 ï¼ˆå‰é¢è·Ÿç€æ— é™ä¸? 1ï¼Œæœ€é«˜ä½æ˜? 1ï¼?= -4
>
> å¤§å?¶å¯ä»¥è‡ªè¡ŒéªŒè¯çœ‹çœ‹ï¼š`(res >> n & 1) == 1` ï¼Œn éšä¾¿å¡?ä¸?å¤§äº 31 çš„æ•°å­—ï¼Œä¹‹å‰æ˜? falseï¼Œä¹‹åå°±å˜æˆ true ï¼ˆä»£è¡¨ç?? 33 ä½ï¼Œç¬? 34 ä½ï¼Œâ€¦â€¦éƒ½è½?æˆ? 1 äº†ï¼‰ã€?
>
> è™½ç„¶è¯´è¿™ç§æ–¹æ³•æœ‰ä¸€ç§è„±è£¤å­æ”¾å±çš„æ„Ÿè§? ï¼Œè€Œä¸”`res -= 2 ** 32` ä¹Ÿèƒ½åŠåˆ°ï¼Œä½†ç”±äºæ¶‰åŠåˆ? int å­˜å‚¨çš„é—®é¢˜ï¼ˆæˆ‘çœç•¥äº†è®¸å?šï¼Œå¤§å?¶è‡ªè¡Œåº¦å¨˜å“ˆï¼‰ï¼Œæˆ‘è?‰å¾—è¿˜æ˜¯æœ‰å¿…è¦çŸ¥é“çš„ã€?
