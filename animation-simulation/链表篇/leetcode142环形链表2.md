> å¦‚æœé˜…è?»æ—¶ï¼Œå‘ç°é”™è¯?ï¼Œæˆ–è€…åŠ¨ç”»ä¸å?ä»¥æ˜¾ç¤ºçš„é—?é¢˜å¯ä»¥æ·»åŠ æˆ‘å¾?ä¿¡å¥½å? **[tan45du_one](https://raw.githubusercontent.com/tan45du/tan45du.github.io/master/ä¸?äººå¾®ä¿?.15egrcgqd94w.jpg)** ï¼Œå?‡æ³¨ github + é¢˜ç›® + é—?é¢? å‘æˆ‘åé??
>
> æ„Ÿè°¢æ”?æŒï¼Œè¯¥ä»“åº“ä¼šä¸€ç›´ç»´æŠ¤ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰ä¸€ä¸?ä¸¢å¸®åŠ©ã€?
>
> å¦å?–å¸Œæœ›æ‰‹æœºé˜…è¯»çš„åŒå?¦å¯ä»¥æ¥æˆ‘çš„ <u>[**å…?ä¼—å·ï¼šè?å¨çš„ç®—æ³•å°å±?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u> ä¸¤ä¸ªå¹³å°åŒæ?¥ï¼Œæƒ³è?å’Œé¢˜å‹ä¸€èµ·åˆ·é¢˜ï¼Œäº’ç›¸ç›‘ç£çš„åŒå­¦ï¼Œå?ä»¥åœ¨æˆ‘çš„å°å±‹ç‚¹å‡»<u>[**åˆ·é?˜å°é˜?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u>è¿›å…¥ã€?

#### [142. ç?å½¢é“¾è¡? II](https://leetcode-cn.com/problems/linked-list-cycle-ii/)

é¢˜ç›®æè¿°ï¼?

ä»Šå¤©ç»™å¤§å®¶ä»‹ç»æ¯”è¾ƒæœ‰ç‰¹ç‚¹çš„é?˜ç›®ï¼Œä¹Ÿæ˜?ä¸€ä¸?ç‰¹åˆ«ç»å…¸çš„é?˜ç›®ï¼Œåˆ¤æ–?é“¾è¡¨ä¸?æœ‰æ²¡æœ‰ç¯ï¼Œå¹¶è¿”å›ç?çš„å…¥å£ã€?

æˆ‘ä»¬å?ä»¥å…ˆåšä¸€ä¸‹è¿™ä¸?é¢˜ç›®ï¼Œå°±æ˜?å¦‚ä½•åˆ¤æ–­é“¾è¡¨ä¸?æ˜?å¦æœ‰ç?å‘?ï¼Ÿä¸‹å›¾åˆ™ä¸ºé“¾è¡¨å­˜åœ¨ç¯çš„æƒ…å†µã€?

![image-20201027175552961](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/image-20201027175552961.63sz69rbes00.png)

åˆ¤æ–­é“¾è¡¨æ˜?å¦æœ‰ç?æ˜?å¾ˆç®€å•çš„ä¸€ä¸?é—?é¢˜ï¼Œæˆ‘ä»¬å?éœ€åˆ©ç”¨ä¹‹å‰çš„å¿«æ…¢æŒ‡é’ˆå³å?ï¼Œå¤§å®¶æƒ³ä¸€ä¸‹ï¼ŒæŒ‡é’ˆå?è¦è¿›å…¥ç¯å†…å°±å?èƒ½åœ¨ç?ä¸?å¾?ç?ï¼Œé‚£ä¹ˆæˆ‘ä»?å?ä»¥åˆ©ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œè™½ç„¶æ…¢æŒ‡é’ˆçš„é€Ÿåº¦å°äºå¿?æŒ‡é’ˆä½†æ˜¯ï¼Œæ€»ä¼šè¿›å…¥ç?ä¸?ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆéƒ½å?„äºç?ä¸?æ—¶ï¼Œå› ä¸ºç§»åŠ¨é€Ÿåº¦ä¸åŒï¼Œä¸¤ä¸?æŒ‡é’ˆå¿…ä¼šç›¸é‡ã€?

æˆ‘ä»¬å?ä»¥è¿™æ ·å‡è®¾ï¼Œä¸¤ä¸ªå­©å­åœ¨æ“åœºé¡ºæ—¶é’ˆè·‘æ?¥ï¼Œä¸€ä¸?è·‘çš„å¿?ï¼Œä¸€ä¸?è·‘çš„æ…?ï¼Œè·‘çš„å¿«çš„é‚£ä¸?å­©å­æ€»ä¼šè¿½ä¸Šè·‘çš„æ…¢çš„å­©å­ã€?

ä»£ç è¯·å‚è€ƒ[ã€åŠ¨ç”»æ¨¡æ‹Ÿã€‘leetcode 141 ç?å½¢é“¾è¡¨](https://github.com/chefyuan/algorithm-base/blob/main/animation-simulation/%E9%93%BE%E8%A1%A8%E7%AF%87/leetcode141%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8.md)ã€?

åˆ¤æ–­é“¾è¡¨æ˜?ä¸æ˜¯å?æœ‰ç¯å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³æ‰¾åˆ°ç¯çš„å…¥å£å¯èƒ½å°±æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“äº†ã€‚ï¼ˆå…¥å£åˆ™ä¸ºä¸‹å›¾ç»¿è‰²èŠ‚ç‚¹ï¼?

ç„¶åæˆ‘ä»¬è¿”å›çš„åˆ™ä¸ºç»¿è‰²èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œåˆ™è¿”å› 2ã€?

![image-20201027180921770](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/image-20201027180921770.21fh8pt3cuv4.png)

### HashSet

æˆ‘ä»¬å?ä»¥åˆ©ç”? HashSet æ¥åšï¼Œä¹‹å‰çš„æ–‡ç« è¯´è¿‡ HashSet æ˜?ä¸€ä¸?ä¸å…è®¸æœ‰é‡å?å…ƒç´ çš„é›†åˆã€‚æ‰€ä»¥æˆ‘ä»?é€šè¿‡ HashSet æ¥ä¿å­˜é“¾è¡¨èŠ‚ç‚¹ï¼Œå¯¹é“¾è¡¨è¿›è¡Œéå†ï¼Œå¦‚æœé“¾è¡¨ä¸å­˜åœ¨ç¯åˆ™æ¯ä¸?èŠ‚ç‚¹éƒ½ä¼šè¢?å­˜å…¥ç?ä¸?ï¼Œä½†æ˜?å½“é“¾è¡¨ä¸­å­˜åœ¨ç?æ—¶ï¼Œåˆ™ä¼šå‘é‡å¤å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹çš„æƒ…å†µï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å‘ç° HashSet ä¸?å?æœ‰æŸèŠ‚ç‚¹æ—¶è?´æ˜è¯¥èŠ‚ç‚¹ä¸ºç?çš„å…¥å£ï¼Œè¿”å›å³å¯ã€?

ä¸‹å›¾ä¸?ï¼Œå­˜å‚¨é¡ºåºä¸º 0ï¼?1ï¼?2ï¼?3ï¼?4ï¼?5ï¼?6ï¼?**2 **å› ä¸º 2 å·²ç»å­˜åœ¨ï¼Œåˆ™è¿”å›ã€?

![image-20201027182649669](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/image-20201027182649669.2g8gq4ik6xs0.png)

Java Code:

```java
public class Solution {
    public ListNode detectCycle(ListNode head) {
         if (head == null) {
             return head;
         }
         if (head.next == null) {
             return head.next;
         }
         //åˆ›å»ºæ–°çš„HashSetï¼Œç”¨äºä¿å­˜èŠ‚ç‚?
         HashSet<ListNode> hash = new HashSet<ListNode>();
         //éå†é“¾è¡¨
         while (head != null) {
             //åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜?å¦å«æœ‰æŸèŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™ä¿å­˜ï¼Œå«æœ‰åˆ™è¿”å›è¯¥èŠ‚ç‚?
             if (hash.contains(head)) {
                 return head;
             }
             //ä¸å«æœ‰ï¼Œåˆ™è¿›è¡Œä¿å­˜ï¼Œå¹¶ç§»åŠ¨æŒ‡é’?
             hash.add(head);
             head = head.next;
         }
        return head;
    }
}
```

C++ Code:

```cpp
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        if (head == nullptr) return head;
        if (head->next == nullptr) return head->next;
        //åˆ›å»ºæ–°çš„HashSetï¼Œç”¨äºä¿å­˜èŠ‚ç‚?
        set<ListNode *> hash;
        //éå†é“¾è¡¨
        while (head != nullptr) {
            //åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜?å¦å«æœ‰æŸèŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™ä¿å­˜ï¼Œå«æœ‰åˆ™è¿”å›è¯¥èŠ‚ç‚?
            if (hash.count(head)) {
                return head;
            }
            //ä¸å«æœ‰ï¼Œåˆ™è¿›è¡Œä¿å­˜ï¼Œå¹¶ç§»åŠ¨æŒ‡é’?
            hash.insert(head);
            head = head->next;
        }
        return head;
    }
};
```

JS Code:

```javascript
var detectCycle = function (head) {
  if (head === null) return head;
  if (head.next === null) return head.next;
  //åˆ›å»ºæ–°çš„HashSetï¼Œç”¨äºä¿å­˜èŠ‚ç‚?
  let hash = new Set();
  //éå†é“¾è¡¨
  while (head !== null) {
    //åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜?å¦å«æœ‰æŸèŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™ä¿å­˜ï¼Œå«æœ‰åˆ™è¿”å›è¯¥èŠ‚ç‚?
    if (hash.has(head)) {
      return head;
    }
    //ä¸å«æœ‰ï¼Œåˆ™è¿›è¡Œä¿å­˜ï¼Œå¹¶ç§»åŠ¨æŒ‡é’?
    hash.add(head);
    head = head.next;
  }
  return head;
};
```

Python Code:

```python
class Solution:
    def detectCycle(self, head: ListNode) -> ListNode:
        if head is None:
            return head
        if head.next is None:
            return head.next
        # åˆ›å»ºæ–°çš„HashSetï¼Œç”¨äºä¿å­˜èŠ‚ç‚?
        hash = set()
        while head is not None:
            # åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜?å¦å«æœ‰æŸèŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™ä¿å­˜ï¼Œå«æœ‰åˆ™è¿”å›è¯¥èŠ‚ç‚?
            if head in hash:
                return head
            # ä¸å«æœ‰ï¼Œåˆ™è¿›è¡Œä¿å­˜ï¼Œå¹¶ç§»åŠ¨æŒ‡é’?
            hash.add(head)
            head = head.next
        return head
```

### å¿?æ…¢æŒ‡é’?

è¿™ä¸ªæ–¹æ³•æ˜?æ¯”è¾ƒå·§å?™çš„æ–¹æ³•ï¼Œä½†æ˜?ä¸å?¹æ˜“æƒ³åˆ°ï¼Œä¹Ÿä¸å¤ªå®¹æ˜“ç†è§£ï¼Œåˆ©ç”¨å¿«æ…¢æŒ‡é’ˆåˆ¤æ–?æ˜?å¦æœ‰ç?å¾ˆå?¹æ˜“ï¼Œä½†æ˜?åˆ¤æ–­ç?çš„å…¥å£å°±æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œä¹‹å‰è?´è¿‡å¿?æ…¢æŒ‡é’ˆè‚¯å®šä¼šåœ¨ç¯å†…ç›¸é‡ï¼Œè§ä¸‹å›¾ã€?

![image-20201027184755943](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/image-20201027184755943.3edot8s2xi60.png)

ä¸Šå›¾é»„è‰²èŠ‚ç‚¹ä¸ºå¿«æ…¢æŒ‡é’ˆç›¸é‡çš„èŠ‚ç‚¹ï¼Œæ?¤æ—¶

å¿?æŒ‡é’ˆèµ°çš„è·ç?»ï¼š**a+(b+c)n+b**ï¼Œn ä»£è¡¨åœˆæ•°ã€?

å¾ˆå?¹æ˜“ç†è§£ b+c ä¸ºç¯çš„é•¿åº¦ï¼Œa ä¸ºç›´çº¿è·ç¦»ï¼Œb ä¸ºç»•äº? n åœˆä¹‹ååˆèµ°äº†ä¸€æ®µè·ç¦»æ‰ç›¸é‡ï¼Œæ‰€ä»¥ç›¸é‡æ—¶èµ°çš„æ€»è·¯ç¨‹ä¸º a+(b+c)n+bï¼Œåˆå¹¶åŒç±»é¡¹å¾? a+(n+1)b+ncã€?

æ…¢æŒ‡é’ˆèµ°çš„è·ç¦»ï¼š**a+(b+c)m+b**ï¼Œm ä»£è¡¨åœˆæ•°ã€?

ç„¶åæˆ‘ä»¬è®¾å¿«æŒ‡é’ˆå¾—é€Ÿåº¦æ˜?æ…¢æŒ‡é’ˆçš„ 2 å€ï¼Œå?ä¹‰ä¸ºç›¸åŒæ—¶é—´å†…ï¼Œå¿?æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»æ˜¯æ…¢æŒ‡é’ˆçš„ 2 å€ã€?

**a+(n+1)b+nc=2[a+(m+1)b+mc]**æ•´ç†å¾?**a+b=(n-2m)(b+c)ï¼?**é‚£ä¹ˆæˆ‘ä»¬å?ä»¥ä»è¿™ä¸ªç­‰å¼ä¸Šé¢å‘ç°ä»€ä¹ˆå‘¢ï¼?

**b+c**ä¸ºä¸€åœˆçš„é•¿åº¦ã€‚ä¹Ÿå°±æ˜¯è¯? a+b ç­‰äº n-2m ä¸?ç?çš„é•¿åº¦ã€‚ä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»?çœ‹ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå½? n-2m ç­‰äº 1ï¼Œé‚£ä¹? a+b=b+c æ•´ç†å¾—ï¼Œa=cã€‚æ?¤æ—¶æˆ‘ä»¬å?éœ€é‡æ–°é‡Šæ”¾ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸?ä»? head é‡Šæ”¾ï¼Œä¸€ä¸?ä»ç›¸é‡ç‚¹é‡Šæ”¾ï¼Œé€Ÿåº¦ç›¸åŒï¼Œå› ä¸? a=c æ‰€ä»¥ä»–ä¿©å¿…ä¼šåœ¨ç?å…¥å£å¤„ç›¸é‡ï¼Œåˆ™æ±‚å¾—å…¥å£èŠ‚ç‚¹ç´¢å¼•ã€?

ç®—æ³•æµç¨‹ï¼?

1.è®¾ç½®å¿?æ…¢æŒ‡é’ˆï¼Œå¿?æŒ‡é’ˆé€Ÿåº¦ä¸ºæ…¢æŒ‡é’ˆçš? 2 å€ã€?

2.æ‰¾å‡ºç›¸é‡ç‚¹ã€?

3.åœ? head å¤„å’Œç›¸é‡ç‚¹åŒæ—¶é‡Šæ”¾ç›¸åŒé€Ÿåº¦ä¸”é€Ÿåº¦ä¸? 1 çš„æŒ‡é’ˆï¼Œä¸¤æŒ‡é’ˆå¿…ä¼šåœ¨ç?å…¥å£å¤„ç›¸é‡ã€?

![ç?å½¢é“¾è¡?2](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/ç?å½¢é“¾è¡?2.elwu1pw2lw0.gif)

**é¢˜ç›®ä»£ç **

Java Code:

```java
public class Solution {
    public ListNode detectCycle(ListNode head) {
       //å¿?æ…¢æŒ‡é’?
        ListNode fast = head;
        ListNode slow = head;
        //è®¾ç½®å¾?ç?æ¡ä»¶
        while (fast != null && fast.next != null) {
            fast = fast.next.next;
            slow = slow.next;
            //ç›¸é‡
            if (fast == slow) {
                //è®¾ç½®ä¸€ä¸?æ–°çš„æŒ‡é’ˆï¼Œä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦ä¸?1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ…¢æŒ‡é’ˆä»ç›¸é‡ç‚¹å‡ºå‘
                ListNode newptr = head;
                while (newptr != slow) {
                    slow = slow.next;
                    newptr = newptr.next;
                }
                //åœ¨ç¯å…¥å£ç›¸é‡
                return slow;
            }
        }
        return null;
    }
}
```

C++ Code:

```cpp
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        //å¿?æ…¢æŒ‡é’?
        ListNode * fast = head;
        ListNode * slow = head;
        //è®¾ç½®å¾?ç?æ¡ä»¶
        while (fast != nullptr && fast->next != nullptr) {
            fast = fast->next->next;
            slow = slow->next;
            //ç›¸é‡
            if (fast == slow) {
                //è®¾ç½®ä¸€ä¸?æ–°çš„æŒ‡é’ˆï¼Œä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦ä¸?1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ…¢æŒ‡é’ˆä»ç›¸é‡ç‚¹å‡ºå‘
                ListNode * newnode = head;
                while (newnode != slow) {
                    slow = slow->next;
                    newnode = newnode->next;
                }
                //åœ¨ç¯å…¥å£ç›¸é‡
                return slow;
            }
        }
        return nullptr;
    }
};
```

JS Code:

```js
var detectCycle = function (head) {
  //å¿?æ…¢æŒ‡é’?
  let fast = head;
  let slow = head;
  //è®¾ç½®å¾?ç?æ¡ä»¶
  while (fast && fast.next) {
    fast = fast.next.next;
    slow = slow.next;
    //ç›¸é‡
    if (fast == slow) {
      let newptr = head;
      //è®¾ç½®ä¸€ä¸?æ–°çš„æŒ‡é’ˆï¼Œä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦ä¸?1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ…¢æŒ‡é’ˆä»ç›¸é‡ç‚¹å‡ºå‘
      while (newptr != slow) {
        slow = slow.next;
        newptr = newptr.next;
      }
      //åœ¨ç¯å…¥å£ç›¸é‡
      return slow;
    }
  }
  return null;
};
```

Python Code:

```python
class Solution:
    def detectCycle(self, head: ListNode) -> ListNode:
        # å¿?æ…¢æŒ‡é’?
        fast = head
        slow = head
        # è®¾ç½®å¾?ç?æ¡ä»¶
        while fast is not None and fast.next is not None:
            fast = fast.next.next
            slow = slow.next
            # ç›¸é‡
            if fast is slow:
                # è®¾ç½®ä¸€ä¸?æ–°çš„æŒ‡é’ˆï¼Œä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦ä¸?1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ…¢æŒ‡é’ˆä»ç›¸é‡ç‚¹å‡ºå‘
                newptr = head
                while newptr is not slow:
                    slow = slow.next
                    newptr = newptr.next
                # åœ¨ç¯å…¥å£ç›¸é‡
                return slow
```

Swift Codeï¼?

```swift
class Solution {
    func detectCycle(_ head: ListNode?) -> ListNode? {
        // å¿?æ…¢æŒ‡é’?
        var fast = head, slow = head
        while fast != nil && fast?.next != nil {
            fast = fast?.next?.next
            slow = slow?.next
            // ç›¸é‡
            if fast === slow {
                // è®¾ç½®ä¸€ä¸?æ–°çš„æŒ‡é’ˆï¼Œä»å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦ä¸?1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ…¢æŒ‡é’ˆä»ç›¸é‡ç‚¹å‡ºå‘
                // æ­¤å?„ä¹Ÿå?ä»¥ä¸åˆ›æ–°ç»“ç‚¹ï¼Œç›´æ¥å°† fast = head
                var newNode = head
                while newNode !== slow {
                    slow = slow?.next
                    newNode = newNode?.next
                }
                return slow
            }
        }
        return nil
    }
}
```

Go Code:

```go
func detectCycle(head *ListNode) *ListNode {
    if head == nil { return nil }
    s, f := head, head
    for f != nil && f.Next != nil {
        s = s.Next
        f = f.Next.Next
        // å¿?æ…¢æŒ‡é’ˆç›¸é?
        if f == s {
            // å¿?æŒ‡é’ˆä»å¤´å¼€å§‹ä¸€æ­¥ä¸€æ­¥èµ°ï¼Œä¹Ÿå?ä»¥ç”¨ä¸€ä¸?æ–°çš„æŒ‡é’ˆ
            f = head
            for f != s {
                f = f.Next
                s = s.Next
            }
            return f
        }
    }
    return nil
}
```

