> å¦‚æœé˜…è?»æ—¶ï¼Œå‘ç°é”™è¯?ï¼Œæˆ–è€…åŠ¨ç”»ä¸å?ä»¥æ˜¾ç¤ºçš„é—?é¢˜å¯ä»¥æ·»åŠ æˆ‘å¾?ä¿¡å¥½å? **[tan45du_one](https://raw.githubusercontent.com/tan45du/tan45du.github.io/master/ä¸?äººå¾®ä¿?.15egrcgqd94w.jpg)** ï¼Œå?‡æ³¨ github + é¢˜ç›® + é—?é¢? å‘æˆ‘åé??
>
> æ„Ÿè°¢æ”?æŒï¼Œè¯¥ä»“åº“ä¼šä¸€ç›´ç»´æŠ¤ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰ä¸€ä¸?ä¸¢å¸®åŠ©ã€?
>
> å¦å?–å¸Œæœ›æ‰‹æœºé˜…è¯»çš„åŒå?¦å¯ä»¥æ¥æˆ‘çš„ <u>[**å…?ä¼—å·ï¼šè?å¨çš„ç®—æ³•å°å±?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u> ä¸¤ä¸ªå¹³å°åŒæ?¥ï¼Œæƒ³è?å’Œé¢˜å‹ä¸€èµ·åˆ·é¢˜ï¼Œäº’ç›¸ç›‘ç£çš„åŒå­¦ï¼Œå?ä»¥åœ¨æˆ‘çš„å°å±‹ç‚¹å‡»<u>[**åˆ·é?˜å°é˜?**](https://raw.githubusercontent.com/tan45du/test/master/å¾?ä¿¡å›¾ç‰‡_20210320152235.2pthdebvh1c0.png)</u>è¿›å…¥ã€?

## æŸ¥æ‰¾å…ƒç´ ç¬?ä¸€ä¸?ä½ç½®å’Œæœ€åä¸€ä¸?ä½ç½®

ä¸Šé¢æˆ‘ä»¬è¯´äº†å¦‚ä½•ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨æ•°ç»„æˆ–åŒºé—´é‡ŒæŸ¥å‡ºç‰¹å®šå€¼çš„ç´¢å¼•ä½ç½®ã€‚ä½†æ˜?æˆ‘ä»¬åˆšæ‰æ•°ç»„é‡Œé¢éƒ½æ²¡æœ‰é‡å¤å€¼ï¼ŒæŸ¥åˆ°è¿”å›å³å¯ï¼Œé‚£ä¹ˆæˆ‘ä»?æ€è€ƒä¸€ä¸‹ä¸‹é¢è¿™ç§æƒ…å†?

![äºŒåˆ†æŸ¥æ‰¾å˜ç?ä¸€](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/äºŒåˆ†æŸ¥æ‰¾å˜ç?ä¸€.3axfe8rq0ei0.png)

æ­¤æ—¶æˆ‘ä»¬æ•°ç»„é‡Œå«æœ‰å?šä¸ª 5 ï¼Œæˆ‘ä»?æŸ¥è?¢æ˜¯å¦å«æœ? 5 å?ä»¥å¾ˆå®¹æ˜“æŸ¥åˆ°ï¼Œä½†æ˜?æˆ‘ä»¬æƒ³è·å–ç??ä¸€ä¸? 5 å’? æœ€åä¸€ä¸? 5 çš„ä½ç½?åº”è?¥æ€ä¹ˆå®ç°å‘?ï¼Ÿå“¦ï¼æˆ‘ä»?å?ä»¥ä½¿ç”¨éå†ï¼Œå½“æŸ¥è¯¢åˆ°ç¬?ä¸€ä¸? 5 æ—¶ï¼Œæˆ‘ä»¬è®¾ç«‹ä¸€ä¸?æŒ‡é’ˆè¿›è?Œå®šä½ï¼Œç„¶ååˆ°è¾¾æœ€åä¸€ä¸? 5 æ—¶è¿”å›ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ±‚çš„ç¬?ä¸€ä¸?å’Œæœ€åä¸€ä¸?äº”äº†ï¼Ÿå› ä¸ºæˆ‘ä»?è¿™ä¸ªæ–‡ç« çš„ä¸»é¢˜å°±æ˜?äºŒåˆ†æŸ¥æ‰¾ï¼Œæˆ‘ä»?å?ä¸å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥å®ç°å‘¢ï¼Ÿå½“ç„¶æ˜¯å?ä»¥çš„ã€?

#### [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç??ä¸€ä¸?å’Œæœ€åä¸€ä¸?ä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

#### é¢˜ç›®æè¿°

> ç»™å®šä¸€ä¸?æŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»? numsï¼Œå’Œä¸€ä¸?ç›?æ ‡å€? targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸?çš„å¼€å§‹ä½ç½?å’Œç»“æŸä½ç½?ã€?
>
> å¦‚æœæ•°ç»„ä¸?ä¸å­˜åœ¨ç›®æ ‡å€? targetï¼Œè¿”å›? [-1, -1]ã€?

ç¤ºä¾‹ 1ï¼?

> è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
> è¾“å‡ºï¼š[3,4]

ç¤ºä¾‹ 2ï¼?

> è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
> è¾“å‡ºï¼š[-1,-1]

ç¤ºä¾‹ 3ï¼?

> è¾“å…¥ï¼šnums = [], target = 0
> è¾“å‡ºï¼š[-1,-1]

#### é¢˜ç›®è§£æ

è¿™ä¸ªé¢˜ç›®å¾ˆå?¹æ˜“ç†è§£ï¼Œæˆ‘ä»?åœ¨ä¸Šé¢è?´äº†å¦‚ä½•ä½¿ç”¨éå†è§£å†³è¯¥é?˜ï¼Œä½†æ˜¯è¿™ä¸ªé¢˜ç›®çš„ç›®çš„å°±æ˜?è®©æˆ‘ä»?ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæˆ‘ä»?æ¥é€ä¸ªåˆ†æï¼Œå…ˆæ‰¾å‡ºç›?æ ‡å…ƒç´ çš„ä¸‹è¾¹ç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°ç›?æ ‡å…ƒç´ çš„ä¸‹è¾¹ç•Œå‘¢ï¼?

æˆ‘ä»¬æ¥é‡ç‚¹åˆ†æä¸€ä¸‹åˆšæ‰äºŒåˆ†æŸ¥æ‰¾ä¸­çš„è¿™æ®µä»£ç ?

```java
  if (nums[mid] == target) {
       return mid;
  }else if (nums[mid] < target) {
      //è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç§»åŠ¨å·¦æŒ‡é’?
      left  = mid + 1;
  }else if (nums[mid] > target) {
      //è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç§»åŠ¨å³æŒ‡é’?
      right = mid - 1;
  }
```

æˆ‘ä»¬å?éœ€åœ¨è¿™æ®µä»£ç ä¸­ä¿?æ”¹å³å?ï¼Œæˆ‘ä»?å†æ¥å‰–æä¸€ä¸‹è¿™å—ä»£ç ï¼Œnums[mid] == target æ—¶åˆ™è¿”å›ï¼Œnums[mid] < target æ—¶åˆ™ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œåœ¨å³åŒºé—´è¿›è?ŒæŸ¥æ‰¾ï¼Œ nums[mid] > target æ—¶åˆ™ç§»åŠ¨å³æŒ‡é’ˆï¼Œåœ¨å·¦åŒºé—´å†…è¿›è¡ŒæŸ¥æ‰¾ã€?

é‚£ä¹ˆæˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæ­¤æ—¶æˆ‘ä»¬çš? nums[mid] = target ,ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ç¡?å®? mid æ˜?å¦ä¸ºè¯¥ç›®æ ‡æ•°çš„å·¦è¾¹ç•Œï¼Œæ‰€ä»¥æ?¤æ—¶æˆ‘ä»¬ä¸å¯ä»¥è¿”å›ä¸‹æ ‡ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ç§æƒ…å†µã€?![äºŒåˆ†æŸ¥æ‰¾ä¸‹è¾¹ç•Œ](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/äºŒåˆ†æŸ¥æ‰¾ä¸‹è¾¹ç•?.m9m083jempc.png)

æ­¤æ—¶ mid = 4 ï¼Œnums[mid] = 5,ä½†æ˜¯æ­¤æ—¶çš? mid æŒ‡å‘çš„å¹¶ä¸æ˜¯ç¬?ä¸€ä¸? 5ï¼Œæ‰€ä»¥æˆ‘ä»?éœ€è¦ç»§ç»?æŸ¥æ‰¾ ï¼Œå› ä¸ºæˆ‘ä»?è¦æ‰¾

çš„æ˜¯æ•°çš„ä¸‹è¾¹ç•Œï¼Œæ‰€ä»¥æˆ‘ä»?éœ€è¦åœ¨ mid çš„å€¼çš„å·¦åŒºé—´ç»§ç»?å¯»æ‰¾ 5 ï¼Œé‚£æˆ‘ä»¬åº”è?¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»?å?éœ€åœ?

target <= nums[mid] æ—¶ï¼Œè®? right = mid - 1 å³å¯ï¼Œè¿™æ ·æˆ‘ä»?å°±å¯ä»¥ç»§ç»?åœ? mid çš„å·¦åŒºé—´ç»§ç»­æ‰? 5 ã€‚æ˜¯ä¸æ˜¯å?ç€æœ‰ç‚¹ç»•ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™ç»„å›¾è¿›è¡Œæè¿°ã€?

![å·¦è¾¹ç•?1](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/å·¦è¾¹ç•?1.5o2ihokjfg80.png)

![å·¦è¾¹ç•?2](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/å·¦è¾¹ç•?2.5wazlfm298s0.png)

å…¶å®åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å°†å°äºå’Œç­‰äºåˆå¹¶åœ¨ä¸€èµ·å?„ç†ï¼Œå½“ target <= nums[mid] æ—¶ï¼Œæˆ‘ä»¬éƒ½ç§»åŠ¨å³æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ right = mid -1ï¼Œè¿˜æœ‰ä¸€ä¸?éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œæˆ‘ä»?è®¡ç®—ä¸‹è¾¹ç•Œæ—¶æœ€åçš„è¿”å›å€¼ä¸º left ï¼Œå½“ä¸Šå›¾ç»“æŸå¾?ç?æ—¶ï¼Œleft = 3ï¼Œright = 2ï¼Œè¿”å›? left åˆšå¥½æ—¶æˆ‘ä»?çš„ä¸‹è¾¹ç•Œã€‚æˆ‘ä»?æ¥çœ‹ä¸€ä¸‹æ±‚ä¸‹è¾¹ç•Œçš„å…·ä½“æ‰§è?Œè¿‡ç¨‹ã€?

**åŠ¨å›¾è§£æ**

![äºŒåˆ†æŸ¥æ‰¾ä¸‹è¾¹ç•Œ](https://cdn.jsdelivr.net/gh/tan45du/photobed@master/photo/äºŒåˆ†æŸ¥æ‰¾ä¸‹è¾¹ç•?.u1cidx99yio.gif)

```java
int lowerBound(int[] nums, int target) {
        int left = 0, right = nums.length - 1;
        while (left <= right) {
            //è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè®¡ç®—mid
            int mid = left + ((right - left) >> 1);
            if (target <= nums[mid]) {
                //å½“ç›®æ ‡å€¼å°äºç­‰äºnums[mid]æ—¶ï¼Œç»§ç»­åœ¨å·¦åŒºé—´æ£€ç´?ï¼Œæ‰¾åˆ°ç??ä¸€ä¸?æ•?
                right = mid - 1;

            }else if (target > nums[mid]) {
                //ç›?æ ‡å€¼å¤§äºnums[mid]æ—¶ï¼Œåˆ™åœ¨å³åŒºé—´ç»§ç»?æ£€ç´?ï¼Œæ‰¾åˆ°ç??ä¸€ä¸?ç­‰äºç›?æ ‡å€¼çš„æ•?
                left = mid + 1;

            }
        }
        return left;
    }
```

è®¡ç®—ä¸Šè¾¹ç•Œæ—¶ç®—æ˜¯å’Œè?¡ç®—ä¸Šè¾¹ç•Œæ—¶æ¡ä»¶ç›¸åï¼?

è®¡ç®—ä¸‹è¾¹ç•Œæ—¶ï¼Œå½“ target <= nums[mid] æ—¶ï¼Œright = mid -1ï¼›target > nums[mid] æ—¶ï¼Œleft = mid + 1ï¼?

è®¡ç®—ä¸Šè¾¹ç•Œæ—¶ï¼Œå½“ target < nums[mid] æ—¶ï¼Œright = mid -1; target >= nums[mid] æ—? left = mid + 1;åˆšå¥½å’Œè?¡ç®—ä¸‹è¾¹ç•Œæ—¶æ¡ä»¶ç›¸åï¼Œè¿”å›? rightã€?

**è®¡ç®—ä¸Šè¾¹ç•Œä»£ç ?**

```java
int upperBound(int[] nums, int target) {
        int left = 0, right = nums.length - 1;
        while (left <= right) {
            //æ±‚mid
            int mid = left + ((right - left) >> 1);
            //ç§»åŠ¨å·¦æŒ‡é’ˆæƒ…å†?
            if (target >= nums[mid]) {
                 left = mid + 1;
            //ç§»åŠ¨å³æŒ‡é’ˆæƒ…å†?
            }else if (target < nums[mid]) {
                right = mid - 1;
            }

        }
        return left;
    }
```

#### **é¢˜ç›®å®Œæ•´ä»£ç **

```java
class Solution {
    public int[] searchRange (int[] nums, int target) {
         int upper = upperBound(nums,target);
         int low = lowerBound(nums,target);
         //ä¸å­˜åœ¨æƒ…å†?
         if (upper < low) {
             return new int[]{-1,-1};
         }
         return new int[]{low,upper};
    }
    //è®¡ç®—ä¸‹è¾¹ç•?
    int lowerBound(int[] nums, int target) {
        int left = 0, right = nums.length - 1;
        while (left <= right) {
            //è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè®¡ç®—mid
            int mid = left + ((right - left) >> 1);
            if (target <= nums[mid]) {
                //å½“ç›®æ ‡å€¼å°äºç­‰äºnums[mid]æ—¶ï¼Œç»§ç»­åœ¨å·¦åŒºé—´æ£€ç´?ï¼Œæ‰¾åˆ°ç??ä¸€ä¸?æ•?
                right = mid - 1;

            }else if (target > nums[mid]) {
                //ç›?æ ‡å€¼å¤§äºnums[mid]æ—¶ï¼Œåˆ™åœ¨å³åŒºé—´ç»§ç»?æ£€ç´?ï¼Œæ‰¾åˆ°ç??ä¸€ä¸?ç­‰äºç›?æ ‡å€¼çš„æ•?
                left = mid + 1;

            }
        }
        return left;
    }
    //è®¡ç®—ä¸Šè¾¹ç•?
    int upperBound(int[] nums, int target) {
        int left = 0, right = nums.length - 1;
        while (left <= right) {
            int mid = left + ((right - left) >> 1);
            if (target >= nums[mid]) {
                 left = mid + 1;
            }else if (target < nums[mid]) {
                right = mid - 1;
            }
        }
        return right;
    }
}
```

Go Code:

```go
func searchRange(nums []int, target int) []int {
    upper := upperBound(nums, target)
    lower := lowerBound(nums, target)

    if (upper < lower) {
        return []int{-1, -1}
    }
    return []int{lower, upper}
}

// upperBound è®¡ç®—ä¸Šè¾¹ç•?
func upperBound(nums []int, target int) int {
    l, r := 0, len(nums) - 1
    for l <= r {
        m := l + (r - l) / 2
        if target >= nums[m] {
            l = m + 1
        } else if target < nums[m] {
            r = m - 1
        }
    }
    return r
}

// lowerBound è®¡ç®—ä¸‹è¾¹ç•?
func lowerBound(nums []int, target int) int {
    l, r := 0, len(nums) - 1
    for l <= r {
        m := l + (r - l) / 2
        if target <= nums[m] {
            r = m - 1
        } else if target > nums[m] {
            l = m + 1
        }
    }
    return l
}
```

